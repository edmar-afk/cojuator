{% load static %}

<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<title>Category</title>
		<!-- Bootstrap CSS -->
		<link
			rel="stylesheet"
			href="{% static 'css/bootstrap.min.css' %}" />
		<!-- Typography CSS -->
		<link
			rel="stylesheet"
			href="{% static 'css/typography.css' %}" />
		<!-- Style CSS -->
		<link
			rel="stylesheet"
			href="{% static 'css/style.css' %}" />
		<!-- Responsive CSS -->
		<link
			rel="stylesheet"
			href="{% static 'css/responsive.css' %}" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
			integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer" />
		<!-- DataTables CSS -->
		<link
			rel="stylesheet"
			href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css" />
	</head>
	<body>
		<!-- Wrapper Start -->
		<div class="wrapper">
			<!-- Sidebar  -->
			{% include 'includes/sidebar.html' %}
			<!-- Page Content  -->
			<div
				id="content-page"
				class="content-page">
				<div class="container-fluid">
					<div class="row">
						<div class="col-sm-12">
							<div class="iq-card">
								<div class="iq-card-header d-flex justify-content-between">
									<div class="iq-header-title col">
										<h4 class="card-title">Categories Section</h4>
									</div>

									<div class="iq-card-body">
										<!-- Button trigger modal -->
										<button
											type="button"
											class="btn btn-primary"
											data-toggle="modal"
											data-target=".bd-example-modal-lg">
											<i
												class="fa fa-plus-circle"
												aria-hidden="true"></i>
											Add Category
										</button>
									</div>
								</div>
								<div class="iq-card-body">
									<p>
										<i
											class="fa fa-exclamation-circle text-primary"
											aria-hidden="true"></i>
										Setting categories in a shop helps organize products, making it easier to find items and improving
										the overall managing experience.
									</p>

									{% for message in messages %} {% if message.level_tag == 'success' %}
									<div
										class="alert text-white bg-success"
										role="alert">
										<div class="iq-alert-icon">
											<i
												class="fa fa-check-circle"
												aria-hidden="true"></i>
										</div>
										<div class="iq-alert-text">{{message}}</div>
										<button
											type="button"
											class="close"
											data-dismiss="alert"
											aria-label="Close">
											<i class="ri-close-line"></i>
										</button>
									</div>
									{% else %}
									<div
										class="alert text-white bg-danger"
										role="alert">
										<div class="iq-alert-icon">
											<i
												class="fa fa-exclamation-circle"
												aria-hidden="true"></i>
										</div>
										<div class="iq-alert-text">{{message}}</div>
										<button
											type="button"
											class="close"
											data-dismiss="alert"
											aria-label="Close">
											<i class="ri-close-line"></i>
										</button>
									</div>
									{%endif%} {% endfor %}

									<div class="table-responsive">
										<table
											id="products"
											class="table table-striped table-bordered"
											style="width: 100%">
											<thead>
												<tr>
													<th>Category Name</th>

													<th>Action</th>
												</tr>
											</thead>
											<tbody>
												{% for list in categories %}
												<tr>
													<td>{{list.type}}</td>
													<td>
														<a
															href="{% url 'removeCategory' list.id %}"
															class="btn btn-danger text-white"
															onclick="return confirmDelete{{list.id}}()">
															<i
																class="fa fa-trash"
																aria-hidden="true"></i>
															Delete
														</a>
														<button
															type="button"
															data-toggle="modal"
															data-target=".modal{{list.id}}"
															class="btn btn-primary text-white">
															<i
																class="fa fa-pencil"
																aria-hidden="true"></i>
															Edit
														</button>
													</td>
												</tr>

												<div
													class="modal fade modal{{list.id}}"
													tabindex="-1"
													role="dialog"
													aria-hidden="true">
													<div class="modal-dialog modal-md">
														<form
															method="post"
															action="{% url 'editCategory' list.id %}"
															enctype="multipart/form-data">
															{% csrf_token %}
															<div class="modal-content">
																<div class="modal-header">
																	<h5 class="modal-title">
																		Edit
																		<span class="text-primary">{{list.type}}</span>
																		Category
																	</h5>
																	<button
																		type="button"
																		class="close"
																		data-dismiss="modal"
																		aria-label="Close">
																		<span aria-hidden="true">&times;</span>
																	</button>
																</div>
																<div class="modal-body">
																	<div class="col">
																		<label>Category Name</label>
																		<input
																			type="text"
																			name="type"
																			class="form-control"
																			value="{{list.type}}" />
																	</div>
																</div>
																<div class="modal-footer">
																	<button
																		type="button"
																		class="btn btn-secondary"
																		data-dismiss="modal">
																		Close
																	</button>
																	<button
																		type="submit"
																		name="submit"
																		class="btn btn-primary">
																		Save
																	</button>
																</div>
															</div>
														</form>
													</div>
												</div>

												<script>
													function confirmDelete{{list.id}}() {
														return confirm("Are you sure you want to delete {{list.type}} category?");
													}
												</script>
												{% endfor %}
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div
			class="modal fade bd-example-modal-lg"
			tabindex="-1"
			role="dialog"
			aria-hidden="true">
			<div class="modal-dialog modal-md">
				<form
					method="post"
					enctype="multipart/form-data">
					{% csrf_token %}
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title">Add Product Category</h5>
							<button
								type="button"
								class="close"
								data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<div class="col">
								<label>Category Name</label>
								<input
									type="text"
									name="type"
									class="form-control"
									placeholder="Utensils, School Bag etc.." />
							</div>
						</div>
						<div class="modal-footer">
							<button
								type="button"
								class="btn btn-secondary"
								data-dismiss="modal">
								Close
							</button>
							<button
								type="submit"
								name="submit"
								class="btn btn-primary">
								Save
							</button>
						</div>
					</div>
				</form>
			</div>
		</div>

		<!-- Wrapper END -->
		<!-- Footer -->
		{% include 'includes/footer.html' %}

		<!-- jQuery -->
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<!-- Bootstrap JS -->
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
		<!-- DataTables JS -->
		<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
		<script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>

		<!-- Initialize DataTable -->
		<script>
			$(document).ready(function () {
				$("#products").DataTable({
					searching: true, // Enables the search functionality
					ordering: true, // Enables the sorting functionality
				});
			});
		</script>

		<!-- Custom Scripts -->
		<script src="{% static 'js/popper.min.js' %}"></script>
		<script src="{% static 'js/bootstrap.min.js' %}"></script>
		<script src="{% static 'js/jquery.appear.js' %}"></script>
		<script src="{% static 'js/countdown.min.js' %}"></script>
		<script src="{% static 'js/waypoints.min.js' %}"></script>
		<script src="{% static 'js/jquery.counterup.min.js' %}"></script>
		<script src="{% static 'js/wow.min.js' %}"></script>
		<script src="{% static 'js/apexcharts.js' %}"></script>
		<script src="{% static 'js/slick.min.js' %}"></script>
		<script src="{% static 'js/select2.min.js' %}"></script>
		<script src="{% static 'js/owl.carousel.min.js' %}"></script>
		<script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
		<script src="{% static 'js/smooth-scrollbar.js' %}"></script>
		<script src="{% static 'js/lottie.js' %}"></script>
		<script src="{% static 'js/chart-custom.js' %}"></script>
		<script src="{% static 'js/custom.js' %}"></script>
	</body>
</html>
