{% load static %}

<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<title>Saleslady</title>
		<!-- Bootstrap CSS -->
		<link
			rel="stylesheet"
			href="{% static 'css/bootstrap.min.css' %}" />
		<!-- Typography CSS -->
		<link
			rel="stylesheet"
			href="{% static 'css/typography.css' %}" />
		<!-- Style CSS -->
		<link
			rel="stylesheet"
			href="{% static 'css/style.css' %}" />
		<!-- Responsive CSS -->
		<link
			rel="stylesheet"
			href="{% static 'css/responsive.css' %}" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
			integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer" />
		<!-- DataTables CSS -->
		<link
			rel="stylesheet"
			href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css" />
	</head>
	<body>
		<!-- Wrapper Start -->
		<div class="wrapper">
			<!-- Sidebar  -->
			{% include 'includes/sidebar.html' %}
			<!-- Page Content  -->
			<div
				id="content-page"
				class="content-page">
				<div class="container-fluid">
					<div class="row">
						<div class="col-sm-12">
							<div class="iq-card">
								<div class="iq-card-header d-flex justify-content-between">
									<div class="iq-header-title">
										<h4 class="card-title">Sales Staff</h4>
									</div>
									<div class="iq-card-body">
										<!-- Button trigger modal -->
										<button
											type="button"
											class="btn btn-primary"
											data-toggle="modal"
											data-target=".bd-example-modal-lg">
											<i
												class="fa fa-plus-circle"
												aria-hidden="true"></i>
											Add Sales Staff
										</button>
									</div>
								</div>
								<div class="iq-card-body">
									{% for message in messages %} {% if message.level_tag == 'success' %}
									<div
										class="alert text-white bg-success"
										role="alert">
										<div class="iq-alert-icon">
											<i
												class="fa fa-check-circle"
												aria-hidden="true"></i>
										</div>
										<div class="iq-alert-text">{{message}}</div>
										<button
											type="button"
											class="close"
											data-dismiss="alert"
											aria-label="Close">
											<i class="ri-close-line"></i>
										</button>
									</div>
									{% else %}
									<div
										class="alert text-white bg-danger"
										role="alert">
										<div class="iq-alert-icon">
											<i
												class="fa fa-exclamation-circle"
												aria-hidden="true"></i>
										</div>
										<div class="iq-alert-text">{{message}}</div>
										<button
											type="button"
											class="close"
											data-dismiss="alert"
											aria-label="Close">
											<i class="ri-close-line"></i>
										</button>
									</div>
									{%endif%} {% endfor %}
									<div class="table-responsive">
										<table
											id="products"
											class="table table-striped table-bordered"
											style="width: 100%">
											<thead>
												<tr>
													<th>Name</th>
													<th>Mobile Number</th>
													<th>Gender</th>
													<th>Action</th>
												</tr>
											</thead>
											<tbody>
												{% for list in staffs %}
												<tr>
													<td>{{list.first_name}}</td>
													<td>{{ list.username }}</td>
													<td class="d-flex align-items-center">{{list.last_name}}</td>
													<td>
														<a
															href="{% url 'removeStaff' list.id %}"
															class="btn btn-danger text-white"
															onclick="return confirmDelete{{list.id}}()">
															<i
																class="fa fa-trash"
																aria-hidden="true"></i>
															Delete
														</a>
														<button
															type="button"
															data-toggle="modal"
															data-target=".modal{{list.id}}"
															class="btn btn-primary text-white">
															<i
																class="fa fa-pencil"
																aria-hidden="true"></i>
															Edit
														</button>
													</td>
												</tr>

												<div
													class="modal fade modal{{list.id}}"
													tabindex="-1"
													role="dialog"
													aria-hidden="true">
													<div class="modal-dialog modal-lg">
														<form
															action="{% url 'editStaff' list.id %}"
															method="post"
															enctype="multipart/form-data">
															{% csrf_token %}
															<div class="modal-content">
																<div class="modal-header">
																	<h5 class="modal-title">
																		Edit
																		<span class="text-primary">{{list.first_name}}</span>
																		Profile
																	</h5>
																	<button
																		type="button"
																		class="close"
																		data-dismiss="modal"
																		aria-label="Close">
																		<span aria-hidden="true">&times;</span>
																	</button>
																</div>
																<div class="modal-body">
																	<div class="form-row">
																		<div class="col">
																			<label>Staff Name</label>
																			<input
																				type="text"
																				name="staff_name"
																				class="form-control"
																				value="{{list.first_name}}" />
																		</div>
																		<div class="col">
																			<label>Gender</label>
																			<select
																				name="gender"
																				class="form-control form-control-lg">
																				<option
																					selected
																					value="{{list.last_name}}">
																					{{list.last_name}}
																				</option>
																				<option value="Male">Male</option>
																				<option value="Female">Female</option>
																			</select>
																		</div>
																	</div>
																	<div class="form-row mt-4">
																		<label>Mobile Number</label>
																		<input
																			type="number"
																			name="mobile_num"
																			class="form-control"
																			value="{{list.username}}" />
																	</div>

																	<div class="form-row mt-4">
																		<label>
																			Password
																			<span class="text-primary">(Leave blank if not wish to change password)</span>
																		</label>
																		<input
																			type="password"
																			name="password"
																			class="form-control" />
																	</div>
																</div>
																<div class="modal-footer">
																	<button
																		type="button"
																		class="btn btn-secondary"
																		data-dismiss="modal">
																		Close
																	</button>
																	<button
																		type="submit"
																		name="submit"
																		class="btn btn-primary">
																		Edit Staff
																	</button>
																</div>
															</div>
														</form>
													</div>
												</div>
												<script>
													function confirmDelete{{list.id}}() {
														return confirm("Are you sure you want to remove {{list.first_name}} from Staffs?");
													}
												</script>
												{% endfor %}
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div
			class="modal fade bd-example-modal-lg"
			tabindex="-1"
			role="dialog"
			aria-hidden="true">
			<div class="modal-dialog modal-lg">
				<form
					method="post"
					enctype="multipart/form-data">
					{% csrf_token %}
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title">Add Product</h5>
							<button
								type="button"
								class="close"
								data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<div class="form-row">
								<div class="col">
									<label>Staff Name</label>
									<input
										type="text"
										name="staff_name"
										class="form-control"
										placeholder="Staff name" />
								</div>
								<div class="col">
									<label>Gender</label>
									<select
										name="gender"
										class="form-control form-control-lg">
										<option
											selected
											value="Male">
											Male
										</option>
										<option
											selected
											value="Female">
											Female
										</option>
									</select>
								</div>
							</div>
							<div class="form-row mt-4">
								<label>Mobile Number</label>
								<input
									type="number"
									name="mobile_num"
									class="form-control"
									placeholder="09123456789" />
							</div>
							<div class="form-row mt-4">
								<div class="col">
									<label>Password</label>
									<input
										type="password"
										name="password1"
										class="form-control"
										placeholder="***********" />
								</div>
								<div class="col">
									<label>Re-type Password</label>
									<input
										type="password"
										name="password2"
										class="form-control"
										placeholder="***********" />
								</div>
							</div>
						</div>
						<div class="modal-footer">
							<button
								type="button"
								class="btn btn-secondary"
								data-dismiss="modal">
								Close
							</button>
							<button
								type="submit"
								name="submit"
								class="btn btn-primary">
								Create Staff
							</button>
						</div>
					</div>
				</form>
			</div>
		</div>
		<!-- Wrapper END -->
		<!-- Footer -->
		{% include 'includes/footer.html' %}
		<!-- jQuery -->
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<!-- Bootstrap JS -->
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
		<!-- DataTables JS -->
		<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
		<script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>

		<!-- Initialize DataTable -->
		<script>
			$(document).ready(function () {
				$("#products").DataTable({
					searching: true, // Enables the search functionality
					ordering: true, // Enables the sorting functionality
				});
			});
		</script>

		<!-- Custom Scripts -->
		<script src="{% static 'js/popper.min.js' %}"></script>
		<script src="{% static 'js/bootstrap.min.js' %}"></script>
		<script src="{% static 'js/jquery.appear.js' %}"></script>
		<script src="{% static 'js/countdown.min.js' %}"></script>
		<script src="{% static 'js/waypoints.min.js' %}"></script>
		<script src="{% static 'js/jquery.counterup.min.js' %}"></script>
		<script src="{% static 'js/wow.min.js' %}"></script>
		<script src="{% static 'js/apexcharts.js' %}"></script>
		<script src="{% static 'js/slick.min.js' %}"></script>
		<script src="{% static 'js/select2.min.js' %}"></script>
		<script src="{% static 'js/owl.carousel.min.js' %}"></script>
		<script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
		<script src="{% static 'js/smooth-scrollbar.js' %}"></script>
		<script src="{% static 'js/lottie.js' %}"></script>
		<script src="{% static 'js/chart-custom.js' %}"></script>
		<script src="{% static 'js/custom.js' %}"></script>
	</body>
</html>
